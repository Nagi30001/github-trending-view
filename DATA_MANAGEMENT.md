# æ•°æ®ç®¡ç†ç­–ç•¥è¯´æ˜

## ğŸ“Š æ•°æ®å­˜å‚¨æœºåˆ¶

### 1. æ•°æ®æ–‡ä»¶å­˜å‚¨ (`data/` ç›®å½•)

**åŸå§‹ JSON æ–‡ä»¶**ï¼š
- æ¯æ¬¡æŠ“å–ä¼šåˆ›å»ºæ–°çš„ JSON æ–‡ä»¶
- æ–‡ä»¶å‘½åï¼š`{period}-{date}.json`
- ä¾‹å¦‚ï¼š`daily-2026-01-05.json`

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸è¦†ç›–å†å²æ•°æ®
- âœ… æ¯å¤©ç‹¬ç«‹æ–‡ä»¶
- âš ï¸ éœ€è¦å®šæœŸæ¸…ç†

### 2. é™æ€æ•°æ®æ–‡ä»¶ (`public/data.js`)

**ç”Ÿæˆæ—¶æœº**ï¼š
- è¿è¡Œ `npm run build:data` æ—¶ç”Ÿæˆ
- GitHub Actions éƒ¨ç½²æ—¶è‡ªåŠ¨ç”Ÿæˆ

**ä¼˜åŒ–ç­–ç•¥**ï¼š

#### æ•°æ®é™åˆ¶é…ç½®
```javascript
const CONFIG = {
  maxDailyFiles: 30,    // ä¿ç•™æœ€è¿‘ 30 å¤©çš„æ¯æ—¥æ•°æ®
  maxWeeklyFiles: 12,   // ä¿ç•™æœ€è¿‘ 12 å‘¨çš„æ¯å‘¨æ•°æ®
  maxMonthlyFiles: 12,  // ä¿ç•™æœ€è¿‘ 12 ä¸ªæœˆçš„æ¯æœˆæ•°æ®
};
```

#### æ•°æ®å‹ç¼©
- æ¯ä¸ªæ–‡ä»¶åªä¿å­˜å‰ 25 ä¸ªé¡¹ç›®
- å‡å°‘ `data.js` æ–‡ä»¶å¤§å°
- åŠ å¿«ç½‘é¡µåŠ è½½é€Ÿåº¦

#### è‡ªåŠ¨æ¸…ç†
- è¶…å‡ºé™åˆ¶çš„æ—§æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤
- ä¿ç•™æœ€æ–°çš„æ•°æ®

## ğŸ”„ æ•°æ®æ›´æ–°æµç¨‹

### GitHub Actions è‡ªåŠ¨æ›´æ–°

```
å®šæ—¶è§¦å‘ï¼ˆæ¯ 8 å°æ—¶ï¼‰
    â†“
æŠ“å–æœ€æ–° Trending æ•°æ®
    â†“
ä¿å­˜ä¸ºæ–°çš„ JSON æ–‡ä»¶ (data/daily-YYYY-MM-DD.json)
    â†“
ç”Ÿæˆ data.jsï¼ˆè‡ªåŠ¨æ¸…ç†æ—§æ•°æ®ï¼‰
    â†“
éƒ¨ç½²åˆ° GitHub Pages
    â†“
ç½‘ç«™æ›´æ–°
```

### ç¤ºä¾‹æ—¶é—´çº¿

**ç¬¬ 1 å¤©** (2026-01-05):
```
data/
â”œâ”€â”€ daily-2026-01-05.json
â”œâ”€â”€ weekly-2026-01-05.json
â””â”€â”€ monthly-2026-01-05.json

public/data.js = 3 ä¸ªæ–‡ä»¶ = ~18KB
```

**ç¬¬ 31 å¤©** (2026-02-04):
```
data/
â”œâ”€â”€ daily-2026-02-04.json   â† æœ€æ–°
â”œâ”€â”€ ...
â”œâ”€â”€ daily-2026-01-06.json
â”œâ”€â”€ (daily-2026-01-05.json è¢«åˆ é™¤) â† è¶…è¿‡ 30 å¤©é™åˆ¶
â”œâ”€â”€ weekly-2026-02-04.json
â”œâ”€â”€ monthly-2026-02-04.json
â””â”€â”€ ... (å…± 30-50 ä¸ªæ–‡ä»¶)

public/data.js = 54 ä¸ªæ–‡ä»¶ (30 daily + 12 weekly + 12 monthly)
               = ~300-500KB (ä»åœ¨åˆç†èŒƒå›´å†…)
```

## ğŸ’¾ å­˜å‚¨ç©ºé—´ä¼°ç®—

### å•æ—¥æ•°æ®å¤§å°
- **æ¯æ—¥ JSON**: ~4KB
- **æ¯å‘¨ JSON**: ~6KB
- **æ¯æœˆ JSON**: ~10KB

### data.js æ–‡ä»¶å¤§å°ä¼°ç®—
```
30 å¤© Ã— 4KB  = 120KB (daily)
12 å‘¨ Ã— 6KB  = 72KB  (weekly)
12 æœˆ Ã— 10KB = 120KB (monthly)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡ â‰ˆ 312KB
```

### GitHub Pages é™åˆ¶
- âœ… å•æ–‡ä»¶é™åˆ¶ï¼š100MB
- âœ… ä»“åº“æ€»é™åˆ¶ï¼š1GB
- âœ… æ¯æœˆå¸¦å®½é™åˆ¶ï¼š100GB
- **æˆ‘ä»¬çš„ä½¿ç”¨**: ~312KB (è¿œä½äºé™åˆ¶)

## ğŸ› ï¸ æ‰‹åŠ¨ç®¡ç†æ•°æ®

### æŸ¥çœ‹ç°æœ‰æ•°æ®
```bash
ls -lh data/*.json
```

### æ‰‹åŠ¨æ¸…ç†æ—§æ•°æ®
```bash
# åˆ é™¤ 30 å¤©å‰çš„æ¯æ—¥æ•°æ®
find data/ -name "daily-*.json" -mtime +30 -delete

# åˆ é™¤æ‰€æœ‰æ•°æ®ï¼ˆæ…ç”¨ï¼‰
rm data/*.json
```

### ä¿®æ”¹ä¿ç•™ç­–ç•¥
ç¼–è¾‘ `scripts/generate-static-data.js`:

```javascript
const CONFIG = {
  maxDailyFiles: 60,     // æ”¹ä¸ºä¿ç•™ 60 å¤©
  maxWeeklyFiles: 24,    // æ”¹ä¸ºä¿ç•™ 24 å‘¨
  maxMonthlyFiles: 24,   // æ”¹ä¸ºä¿ç•™ 24 æœˆ
};
```

## ğŸ“ˆ æ•°æ®å¢é•¿è¶‹åŠ¿

### é¢„æœŸå¢é•¿é€Ÿåº¦

| æ—¶é—´ | Daily æ–‡ä»¶æ•° | Weekly æ–‡ä»¶æ•° | Monthly æ–‡ä»¶æ•° | æ€»å¤§å° |
|------|-------------|--------------|---------------|--------|
| 1 å‘¨ | 7 | 1 | 1 | ~50KB |
| 1 æœˆ | 30 | 4 | 1 | ~150KB |
| 3 æœˆ | 30 | 12 | 3 | ~300KB |
| 1 å¹´ | 30 | 12 | 12 | ~312KB |

**ç»“è®º**ï¼šç”±äºæœ‰è‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼Œæ•°æ®å¤§å°ä¼šç¨³å®šåœ¨ ~300KB å·¦å³ã€‚

## ğŸ”§ æ•…éšœæ’æŸ¥

### data.js æ–‡ä»¶è¿‡å¤§

**åŸå› **ï¼šé…ç½®é”™è¯¯æˆ–æ¸…ç†æœºåˆ¶å¤±æ•ˆ

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥é…ç½®
cat scripts/generate-static-data.js | grep max

# æ‰‹åŠ¨é‡æ–°ç”Ÿæˆ
npm run build:data

# æ£€æŸ¥æ–‡ä»¶å¤§å°
ls -lh public/data.js
```

### æƒ³è¦ä¿ç•™æ›´å¤šå†å²æ•°æ®

**é€‰é¡¹ 1**ï¼šå¢åŠ ä¿ç•™é™åˆ¶
```javascript
// ä¿®æ”¹ CONFIG
maxDailyFiles: 90,  // ä¿ç•™ 3 ä¸ªæœˆ
```

**é€‰é¡¹ 2**ï¼šå½’æ¡£æ—§æ•°æ®
```bash
# åˆ›å»ºå½’æ¡£ç›®å½•
mkdir -p archive/data

# ç§»åŠ¨æ—§æ•°æ®
mv data/daily-2024-*.json archive/data/

# æäº¤åˆ°ä¸åŒåˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
git checkout -b archive
git add archive/
git commit -m "Archive old data"
```

### æŸ¥çœ‹å®Œæ•´å†å²æ•°æ®

ç”±äº `data.js` åªåŒ…å«å‰ 25 ä¸ªé¡¹ç›®ï¼ŒæŸ¥çœ‹å®Œæ•´æ•°æ®ï¼š

```bash
# ç›´æ¥è¯»å– JSON æ–‡ä»¶
cat data/daily-2026-01-05.json | jq '.repositories | length'

# æˆ–åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨ï¼ˆAPI æ¨¡å¼ï¼‰
npm run serve
# è®¿é—® http://localhost:3000/api/trending/daily?date=2026-01-05
```

## ğŸ“Š æ•°æ®å¤‡ä»½

### è‡ªåŠ¨å¤‡ä»½

GitHub ä»“åº“æœ¬èº«å°±æ˜¯å¤‡ä»½ï¼Œæ‰€æœ‰ `data/` ç›®å½•çš„æ–‡ä»¶éƒ½ä¼šè¢«ä¿å­˜ã€‚

### æ‰‹åŠ¨å¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½
tar -czf trending-data-backup-$(date +%Y%m%d).tar.gz data/

# æ¢å¤å¤‡ä»½
tar -xzf trending-data-backup-20260105.tar.gz
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸæ£€æŸ¥**
   ```bash
   # æ¯æœˆæ£€æŸ¥ä¸€æ¬¡æ•°æ®å¤§å°
   du -sh data/ public/data.js
   ```

2. **è°ƒæ•´é…ç½®**
   - å¦‚æœå‘ç° data.js è¶…è¿‡ 500KBï¼Œè€ƒè™‘å‡å°‘ä¿ç•™å¤©æ•°
   - å¦‚æœéœ€è¦æ›´å¤šå†å²ï¼Œå¢åŠ  maxDailyFiles

3. **ç›‘æ§ GitHub Actions**
   - ç¡®ä¿å®šæ—¶ä»»åŠ¡æ­£å¸¸è¿è¡Œ
   - æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£å¸¸æ›´æ–°

4. **æœ¬åœ°æµ‹è¯•**
   ```bash
   # æµ‹è¯•æ•°æ®ç”Ÿæˆ
   npm run build:data

   # æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶
   cat public/data.js | head -20
   ```

## ğŸ¯ æ€»ç»“

**æ•°æ®ç®¡ç†ç‰¹ç‚¹**ï¼š
- âœ… è‡ªåŠ¨æ¸…ç†æ—§æ•°æ®ï¼ˆé˜²æ­¢æ— é™å¢é•¿ï¼‰
- âœ… æ–‡ä»¶å¤§å°å¯æ§ï¼ˆ~300KBï¼‰
- âœ… ä¿ç•™åˆç†å†å²ï¼ˆ30å¤©/12å‘¨/12æœˆï¼‰
- âœ… æ— éœ€æ‰‹åŠ¨ç»´æŠ¤
- âœ… GitHub è‡ªåŠ¨å¤‡ä»½

**ä¸ä¼šå‡ºç°çš„é—®é¢˜**ï¼š
- âŒ ä»“åº“å¤§å°æ— é™å¢é•¿
- âŒ data.js æ–‡ä»¶è¿‡å¤§
- âŒ åŠ è½½é€Ÿåº¦å˜æ…¢
- âŒ éœ€è¦æ‰‹åŠ¨æ¸…ç†

**ä½ å¯ä»¥æ”¾å¿ƒ**ï¼š
- ğŸ’¤ è®©å®ƒè‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€å¹²é¢„
- ğŸ“± éšæ—¶è®¿é—®ç½‘ç«™æŸ¥çœ‹æœ€æ–°æ•°æ®
- ğŸ”„ GitHub Actions ä¼šå¤„ç†ä¸€åˆ‡

---

**æ›´æ–°æ—¶é—´**: 2026-01-05
